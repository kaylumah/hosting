<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" href="/assets/images/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png" />
    <link rel="manifest" href="/assets/images/site.webmanifest" />
    <link rel="mask-icon" href="/assets/images/safari-pinned-tab.svg" color="DarkGreen" />

    <link href="/compiled.css?v=[SHORT-COMMIT-HASH]" rel="stylesheet" />

    <!-- Begin Kaylumah SEO tag v[SHORT-COMMIT-HASH] -->
    
    <!-- Common Meta Tags -->
    <title>Improve Code Quality with Banned Symbol Analyzers</title>
    <link rel="canonical" href="https://BaseUrl_1/2022/01/31/improve-code-quality-with-bannedsymbolanalyzers.html" />
    <link rel="alternate" type="application/atom+xml" href="https://BaseUrl_1/feed.xml" title="Max Hamulyák · Kaylumah RSS Feed" />
    <link rel="sitemap" type="application/xml" href="https://BaseUrl_1/sitemap.xml" title="Max Hamulyák · Kaylumah Sitemap" />
    <meta name="generator" content="Kaylumah v[SHORT-COMMIT-HASH]" />
    <meta name="description" content="Learn how a simple Roslyn Analyzer can improve code consistency" />
    <meta name="copyright" content="© Kaylumah. All rights reserved." />
    <meta name="keywords" content="csharp, code-quality" />
    
    <!-- OpenGraph Meta Tags -->
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="en" />
    <meta property="og:site_name" content="Max Hamulyák · Kaylumah" />
    <meta property="og:title" content="Improve Code Quality with Banned Symbol Analyzers" />
    <meta property="og:url" content="https://BaseUrl_1/2022/01/31/improve-code-quality-with-bannedsymbolanalyzers.html" />
    <meta property="og:description" content="Learn how a simple Roslyn Analyzer can improve code consistency" />
    <meta property="og:image" content="https://BaseUrl_1/assets/images/posts/20220131/improve-code-quality-with-bannedsymbolanalyzers/cover_image.png" />
    <meta property="article:author" content="Max Hamulyák" />
    <meta property="article:published_time" content="2022-01-31T21:45:00.0000000+01:00" />
    <meta property="article:modified_time" content="2022-01-31T21:45:00.0000000+01:00" />
    <meta property="article:tag" content="csharp" />
    <meta property="article:tag" content="code-quality" />
    
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Improve Code Quality with Banned Symbol Analyzers" />
    <meta name="twitter:description" content="Learn how a simple Roslyn Analyzer can improve code consistency" />
    <meta name="twitter:image" content="https://BaseUrl_1/assets/images/posts/20220131/improve-code-quality-with-bannedsymbolanalyzers/cover_image.png" />
    <meta name="twitter:site" content="@kaylumah" />
    <meta name="twitter:creator" content="@kaylumah" />
    
    <!-- Mastodon Meta Tags -->
    <link rel="me" href="https://mastodon.nl/@kaylumah" />
    
    <!-- Kaylumah BuildInfo Meta Tags -->
    <meta property="kaylumah:copyright" content="© Kaylumah. All rights reserved." />
    <meta property="kaylumah:commit" content="[COMMIT-HASH]" />
    <meta property="kaylumah:version" content="1.0.0.BuildNumber_1" />
    <meta property="kaylumah:buildId" content="[BUILD-ID]" />
    <meta property="kaylumah:buildNumber" content="BuildNumber_1" />
    <meta property="kaylumah:time" content="DateTimeOffset_1" />
    <meta property="kaylumah:site" content="Guid_1" />
    <meta property="kaylumah:page" content="Guid_2" />
    
    <!-- LdJson Meta Tags -->
    <script type="application/ld+json">{
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "description": "Learn how a simple Roslyn Analyzer can improve code consistency",
      "image": "https://BaseUrl_1/assets/images/posts/20220131/improve-code-quality-with-bannedsymbolanalyzers/cover_image.png",
      "mainEntityOfPage": "https://BaseUrl_1/2022/01/31/improve-code-quality-with-bannedsymbolanalyzers.html",
      "url": "https://BaseUrl_1/2022/01/31/improve-code-quality-with-bannedsymbolanalyzers.html",
      "author": {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Max Hamulyák",
        "image": "https://BaseUrl_1/assets/avatar_background.svg",
        "sameAs": [
          "https://www.linkedin.com/in/maxhamulyak",
          "https://twitter.com/kaylumah"
        ],
        "email": "max@kaylumah.nl"
      },
      "dateModified": "2022-01-31T21:45:00+01:00",
      "datePublished": "2022-01-31T21:45:00+01:00",
      "headline": "Improve Code Quality with Banned Symbol Analyzers",
      "inLanguage": "en",
      "keywords": "csharp,code-quality",
      "publisher": {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "kaylumah",
        "sameAs": "https://www.linkedin.com/company/kaylumah",
        "foundingDate": "2020-01-01",
        "logo": "https://BaseUrl_1/assets/logo.svg"
      },
      "timeRequired": "PT4M",
      "wordCount": 892
    }</script>
    
    <!-- End Kaylumah SEO tag -->
    <!--
                                                        
       _  __           _                       _        
      | |/ /__ _ _   _| |_   _ _ __ ___   __ _| |__     
      | ' // _` | | | | | | | | '_ ` _ \ / _` | '_ \    
      | . \ (_| | |_| | | |_| | | | | | | (_| | | | |   
      |_|\_\__,_|\__, |_|\__,_|_| |_| |_|\__,_|_| |_|   
                 |___/                                  
                                                        
     You found 🧸                                      
                                                       
    -->
    
    <script>
    
      const consoleSignatureText = '%c👨‍💻 Thank you for your visit to my little spot on the internet, be welcome! 🧸';
      const consoleSignatureStyle = `
      font-size: 16px;
      background: #4cae50;
      color: white;
      text-align: center;
      padding: 10px 15px;
      width: 100%;
      border-radius: 20px;
    `;
      console.log(consoleSignatureText, consoleSignatureStyle);
    </script>
    <script>
      window.getCookieConsent = function() {
          try {
              const consent = document.cookie.match(/cookie-consent=([^;]+)/)[1];
              return consent;
          } catch (error) {
              console.log("failed to retrieve consent", error);
              return "unknown";
          }
      };
    
      window.setCookieConsent = function(status) {
    
        if (status != "denied" && status != "granted") {
          throw new Error(`Status ${status} is not supported!`);
        }
    
        let today = new Date();
        let expiryDate = new Date(today.getFullYear() + 1, today.getMonth(), today.getDate());
        document.cookie = `cookie-consent=${status}; expires=${expiryDate}; path=/`;
      }
    
    </script>
    <script>
      // Define dataLayer and the gtag function.
      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
    
      window.setGtagConsentStatus = function(mode, status) {
    
        if (mode != "update" && mode != "default") {
          throw new Error(`Mode ${mode} is not supported!`);
        }
    
        if (status != "denied" && status != "granted") {
          throw new Error(`Status ${status} is not supported!`);
        }
    
        gtag('consent', mode, {
          'ad_storage': status,
          'ad_user_data': status,
          'ad_personalization': status,
          'analytics_storage': status
        });
      }
    
      let currentStatus = window.getCookieConsent();
      let cookiesAllowed = currentStatus == "granted";
    
      if (cookiesAllowed) {
        console.log("cookies already approved");
        window.setGtagConsentStatus("default", "granted");
      } else {
        console.log("assume cookies are denied");
        window.setGtagConsentStatus("default", "denied");
      }
    </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MEQZVWN0D7">
    </script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
    
      gtag('js', new Date());
      gtag('config', 'G-MEQZVWN0D7');
    </script>
</head>

<body class="bg-gray-100 font-sans leading-relaxed tracking-wide min-h-screen flex flex-col">
<header class="bg-white shadow-md fixed top-0 left-0 w-full z-50 h-[var(--header-height)]">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
        <!-- Logo -->
        <a href="/" class="flex items-center">
            <img data-testid="NavLogo" class="h-12 w-auto" src="/assets/logo.svg" alt="Kaylumah" />
        </a>

        <!-- Desktop Navigation -->
        <nav class="hidden lg:flex space-x-6">
            
                        <a href="/about.html" class="text-gray-700 hover:text-gray-900">About</a>
                        
                        <a href="/blog.html" class="text-gray-700 hover:text-gray-900">Blog</a>
                        
        </nav>

        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="lg:hidden text-gray-700 focus:outline-none">
            <svg class="toggle block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
            <svg class="toggle hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
    </div>

    <!-- Mobile Navigation -->
    <nav id="mobile-menu" class="hidden bg-white lg:hidden px-4 py-3 space-y-2 shadow-md">
        
                <a href="/about.html" class="block text-gray-700 hover:text-gray-900">About</a>
                
                <a href="/blog.html" class="block text-gray-700 hover:text-gray-900">Blog</a>
                
    </nav>

    <script>
        document.getElementById('mobile-menu-btn').onclick = function toggleMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
            const navIcons = document.getElementsByClassName('toggle');
            for (let i = 0; i < navIcons.length; i++) {
                navIcons[i].classList.toggle('hidden');
            }
        };
    </script>
</header>
<div class="flex-1 container mx-auto px-4 py-8 pt-[var(--header-spacing)]">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Main Content -->
    <main class="lg:col-span-2">
        <section class="bg-white rounded-2xl border border-gray-200 p-6">
            
<article class="prose max-w-none">
    <header class="mb-4 border-b border-gray-300 pb-4">
        <h1 class="text-3xl font-bold">Improve Code Quality with Banned Symbol Analyzers</h1>
        <div class="flex flex-wrap items-center text-gray-600 text-sm mt-2 gap-2">
            <span>Published on <time datetime="2022-01-31">2022/01/31</time></span>
            <span>by <strong>Max Hamulyák</strong></span>
        </div>
        <div class="flex gap-2 mt-2">
            
                        <a href="/blog.html?tag=csharp" class="text-gray-700 text-xs bg-gray-200 px-2 py-1 rounded">#C#</a>
                        
                        <a href="/blog.html?tag=code-quality" class="text-gray-700 text-xs bg-gray-200 px-2 py-1 rounded">#Code Quality</a>
                        
        </div>
    </header>
    <section>
        <p>There are many aspects of code quality; testability and consistency come to mind. I don t find it hard to imagine that the longer a project takes with multiple engineers that work on it, the more inconsistencies are in your codebase.</p>
<p>Thanks to the combination of .editorConfig and Roslyn Analyzers, managing this for your team is easier. Recently, however, I was required to create a custom check for my code. A quick google search pointed me to <a href="https://www.meziantou.net/the-roslyn-analyzers-i-use.htm" class="external">an article from Meziantou</a> which mentioned the &quot;Banned Symbol&quot; Roslyn Analyzer.</p>
<h2 id="scenario"><a href="#scenario">Scenario</a></h2>
<p>Before diving into this Analyzer, let's take a few steps back and do a quick scenario sketch. Imagine you work for a company that allows funds transfer between two parties. Since your company needs to make money, you charge a small fee.</p>
<pre><code class="language-cs">public class FeeCalculator : IFeeCalculator
{
    private const decimal FeePercentage = 0.12M;
    private const decimal MinimumCharge = 0.50M;
    private const decimal PriorityFeePercentage = 0.25M;
    private const decimal PriorityMinimumCharge = 7.50M;

    public decimal Calculate(decimal baseAmount, bool isPriority = false)
    {
        if (isPriority)
        {
            return InternalCalculate(baseAmount, PriorityFeePercentage, PriorityMinimumCharge);
        }
        return InternalCalculate(baseAmount, FeePercentage, MinimumCharge);
    }

    private static decimal InternalCalculate(decimal amount, decimal percentage, decimal minimumFee)
    {
        var calculatedFee = amount * (percentage / 100);
        if (calculatedFee &lt; minimumFee)
        {
            return minimumFee;
        }
        return calculatedFee;
    }
}
</code></pre>
<p>The company decided to offer &quot;Monday Madness&quot; at a heavily discounted fee as a special offer.
The implementation would look similar to the snippet below.</p>
<pre><code class="language-cs">public class DatedFeeCalculator : IFeeCalculator
{
    private const decimal DiscountedFeePercentage = 0.07M;
    private const decimal FeePercentage = 0.12M;
    private const decimal MinimumCharge = 0.50M;
    private const decimal PriorityFeePercentage = 0.25M;
    private const decimal PriorityMinimumCharge = 7.50M;

    public decimal Calculate(decimal baseAmount, bool isPriority = false)
    {
        if (isPriority)
        {
            return InternalCalculate(baseAmount, PriorityFeePercentage, PriorityMinimumCharge);
        }

        if (DateTime.Now.DayOfWeek == DayOfWeek.Monday)
        {
            return InternalCalculate(baseAmount, DiscountedFeePercentage, MinimumCharge);
        }
        return InternalCalculate(baseAmount, FeePercentage, MinimumCharge);
    }

    private static decimal InternalCalculate(decimal amount, decimal percentage, decimal minimumFee)
    {
        var calculatedFee = amount * (percentage / 100);
        if (calculatedFee &lt; minimumFee)
        {
            return minimumFee;
        }
        return calculatedFee;
    }
}
</code></pre>
<p>Take notice of line <code>16</code> which now uses <code>DateTime.Now</code>; the problem that now arises is: how do we test this code?</p>
<h2 id="why-testing-datetime-is-hard"><a href="#why-testing-datetime-is-hard">Why testing DateTime is hard</a></h2>
<p>The following test only results in a green build on a Monday, which is excellent if we release every week just before &quot;Monday Madness&quot; but not so great on every other day.</p>
<pre><code class="language-cs">[Fact]
public void Test2_Discounted()
{
    IFeeCalculator calculator = new DatedFeeCalculator();
    var fee = calculator.Calculate(10_000M, false);
    fee.Should().Be(7.00M); // note only on Mondays it's 7.00; every other day its 12.00
}
</code></pre>
<p>We could mitigate by skipping the offending test every day that is not Monday like this; problem solved, right?</p>
<pre><code class="language-cs">[SkippableFact]
public void Test2_Discounted_Alternative()
{
    Skip.If(DateTimeOffset.Now.DayOfWeek != DayOfWeek.Monday);
    IFeeCalculator calculator = new DatedFeeCalculator();
    var fee = calculator.Calculate(10_000M, false);
    fee.Should().Be(7.00M);
}
</code></pre>
<p>Well, no, not actually. What we want is to decouple our code from statics like DateTime.Now by putting them behind an interface. By providing an interface implementation, we can <a href="https://docs.microsoft.com/en-us/dotnet/core/testing/unit-testing-best-practices#stub-static-references" class="external">stub a static reference</a>.
In an ideal world, this interface would already exist, similar to ILogger in Microsoft.Extensions. For some background reading on why it does not yet exist, see this <a href="https://github.com/dotnet/runtime/issues/36617" class="external">GitHub Issue</a>.</p>
<h2 id="updated-scenario"><a href="#updated-scenario">Updated Scenario</a></h2>
<p>In its most simple from the SystemClock can look like the snippet below.</p>
<pre><code class="language-cs">public interface ISystemClock
{
    DateTimeOffset Now { get; }
}

public class SystemClock : ISystemClock
{
    public DateTimeOffset Now =&gt; DateTimeOffset.Now;
}
</code></pre>
<p>Our updated scenario looks like this:</p>
<pre><code class="language-cs">public class SystemClockFeeCalculator : IFeeCalculator
{
    private const decimal DiscountedFeePercentage = 0.07M;
    private const decimal FeePercentage = 0.12M;
    private const decimal MinimumCharge = 0.50M;
    private const decimal PriorityFeePercentage = 0.25M;
    private const decimal PriorityMinimumCharge = 7.50M;

    private readonly ISystemClock systemClock;

    public SystemClockFeeCalculator(ISystemClock systemClock)
    {
        this.systemClock = systemClock;
    }


    public decimal Calculate(decimal baseAmount, bool isPriority = false)
    {
        if (isPriority)
        {
            return InternalCalculate(baseAmount, PriorityFeePercentage, PriorityMinimumCharge);
        }

        if (systemClock.Now.DayOfWeek == DayOfWeek.Monday)
        {
            return InternalCalculate(baseAmount, DiscountedFeePercentage, MinimumCharge);
        }
        return InternalCalculate(baseAmount, FeePercentage, MinimumCharge);
    }

    private static decimal InternalCalculate(decimal amount, decimal percentage, decimal minimumFee)
    {
        var calculatedFee = amount * (percentage / 100);
        if (calculatedFee &lt; minimumFee)
        {
            return minimumFee;
        }
        return calculatedFee;
    }
}
</code></pre>
<p>With the use of a TestSystemClock or a Moq, we can test our behaviour every day of the week. See, we are improving quality already. In a previous article, <a href="https://BaseUrl_1/2021/04/11/an-approach-to-writing-mocks.html">&quot;Adventures with Mock&quot;</a> you can read more about my preferred way of creating mocks.</p>
<pre><code class="language-cs">public sealed class SystemClockMock : Mock&lt;ISystemClock&gt;
{
    public SystemClockMock SetupSystemTime(DateTimeOffset systemTime)
    {
        Setup(x =&gt; x.Now).Returns(systemTime);
        return this;
    }
}
</code></pre>
<p>Thanks to <code>SystemClockMock</code> I can now change the current date for the test.</p>
<pre><code class="language-cs">[Fact]
public void Test3_FakeClock_Monday()
{
    var clock = new SystemClockMock()
        .SetupSystemTime(new DateTimeOffset(new DateTime(2022, 1, 31)));
    IFeeCalculator calculator = new SystemClockFeeCalculator(clock.Object);
    var fee = calculator.Calculate(10_000M, false);
    fee.Should().Be(7.00M);
}

[Fact]
public void Test3_FakeClock_Tuesday()
{
    var clock = new SystemClockMock()
        .SetupSystemTime(new DateTimeOffset(new DateTime(2022, 2, 1)));
    IFeeCalculator calculator = new SystemClockFeeCalculator(clock.Object);
    var fee = calculator.Calculate(10_000M, false);
    fee.Should().Be(12.00M);
}
</code></pre>
<h2 id="force-wrapper-over-static-reference"><a href="#force-wrapper-over-static-reference">Force Wrapper over Static Reference</a></h2>
<p>Now that we have our SystemClock, how do we make sure every dev in our team uses it over just calling <code>DateTimeOffset.Now</code>?</p>
<p>Finally, our Roslyn Analyzer comes into play. We can use <a href="https://github.com/dotnet/roslyn-analyzers/blob/main/src/Microsoft.CodeAnalysis.BannedApiAnalyzers/BannedApiAnalyzers.Help.md" class="external">Microsoft.CodeAnalysis.BannedApiAnalyzers</a>, which triggers the build warning <code>RS0030</code>. I prefer to enable these warnings on every project under src, so I use a Directory.Build.props file to install the analyzer via NuGet.</p>
<pre><code class="language-xml">&lt;Project&gt;
  &lt;Import Project=&quot;../Directory.Build.props&quot; /&gt;
  &lt;ItemGroup&gt;
    &lt;PackageReference Include=&quot;Microsoft.CodeAnalysis.BannedApiAnalyzers&quot; Version=&quot;3.3.2&quot;&gt;
      &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;
      &lt;IncludeAssets&gt;runtime; build; native; contentfiles; analyzers&lt;/IncludeAssets&gt;
    &lt;/PackageReference&gt;
  &lt;/ItemGroup&gt;
  &lt;ItemGroup&gt;
    &lt;AdditionalFiles Include=&quot;$(MSBuildThisFileDirectory)/BannedSymbols.txt&quot; /&gt;
  &lt;/ItemGroup&gt;
&lt;/Project&gt;
</code></pre>
<p>All that remains is to create a file called <code>BannedSymbols.txt</code> with the following content</p>
<blockquote>
<p><strong>note</strong>: I also blocked the use of DateTime in favour of DateTimeOffset.</p>
</blockquote>
<pre><code class="language-txt">T:System.DateTime;Always use System.DateTimeOffset over System.DateTime
P:System.DateTimeOffset.Now;Use ISystemClock.Now instead
</code></pre>
<p>From this point on every use of <code>DateTimeOffset.Now</code> results in the following error: <code>error RS0030: The symbol 'DateTimeOffset.Now' is banned in this project: Use ISystemClock.Now instead</code>. Which in my opinion is pretty cool :)</p>
<h2 id="closing-thoughts"><a href="#closing-thoughts">Closing Thoughts</a></h2>
<p>Even if the system used in today's example is fictional, I think the BannedSymbolAnalyzers is a compelling package to include in your toolbelt. At the very least, I will use it to force DateTimeOffset over DateTime. Situation allowing I will also push my wrappers over static references to improve testability.</p>
<p>As always, if you have any questions, feel free to reach out. Do you have suggestions or alternatives? I would love to hear about them.</p>
<p>The corresponding source code for this article is on <a href="https://github.com/kaylumah/ImproveCodeQualityWithBannedSymbolAnalyzers" class="external">GitHub</a>.</p>
<p>See you next time, stay healthy and happy coding to all 🧸!</p>
<h2 id="additional-resources"><a href="#additional-resources">Additional Resources</a></h2>
<ul>
<li>[https://github.com/dotnet/roslyn-analyzers](Roslyn Analyzers)</li>
<li>[https://docs.microsoft.com/en-us/visualstudio/code-quality/roslyn-analyzers-overview](Visual Studio Code Quality)</li>
</ul>
    </section>
    
        <section>
        <script src="https://giscus.app/client.js" data-repo="kaylumah/hosting" data-repo-id="MDEwOlJlcG9zaXRvcnkzMzgyNzg4MzU=" data-mapping="number" data-term="139" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light_high_contrast" data-lang="en" data-loading="lazy" crossorigin="anonymous" async>
        </script>    
        </section>
        
</article>

        </section>
    </main>
    <!-- Sidebar Widgets -->
    <aside class="lg:col-span-1 space-y-6">
        <!-- About me Widget -->
        <div class="bg-white rounded-2xl border border-gray-200 p-6">
            <div class="flex flex-col items-center gap-4">
                <img class="rounded-full h-32 w-32" src="https://BaseUrl_1/assets/avatar_background.svg" alt="Kaylumah Hero" />
                <h2 class="text-xl font-semibold">Max Hamulyák</h2>
                <span class="text-gray-600">aka Kaylumah</span>
            </div>
        </div>

        <!-- Sponsorship Widget -->
        <div class="bg-white rounded-2xl border border-gray-200 p-6">
            <h2 class="text-xl font-semibold mb-4">Sponsored</h2>
            <p class="text-gray-600 leading-relaxed">
                Enjoy reading my content? Consider becoming a sponsor for the blog.
                This will help keep the blog up and running!
            </p>
            <ul class="flex justify-center gap-4 mt-4">
                <li>
                    <a href="https://www.buymeacoffee.com/kaylumah" target="_blank" aria-label="Buy Me A Coffee">
                        <svg class="h-8 w-8" role="img" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                            <title>Buy Me A Coffee</title>
                            <path fill="#FFDD00" d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.241-.152-.143-.196-.366-.231-.572-.065-.378-.125-.756-.192-1.133-.057-.325-.102-.69-.25-.987-.195-.4-.597-.634-.996-.788a5.723 5.723 0 00-.626-.194c-1-.263-2.05-.36-3.077-.416a25.834 25.834 0 00-3.7.062c-.915.083-1.88.184-2.75.5-.318.116-.646.256-.888.501-.297.302-.393.77-.177 1.146.154.267.415.456.692.58.36.162.737.284 1.123.366 1.075.238 2.189.331 3.287.37 1.218.05 2.437.01 3.65-.118.299-.033.598-.073.896-.119.352-.054.578-.513.474-.834-.124-.383-.457-.531-.834-.473-.466.074-.96.108-1.382.146-1.177.08-2.358.082-3.536.006a22.228 22.228 0 01-1.157-.107c-.086-.01-.18-.025-.258-.036-.243-.036-.484-.08-.724-.13-.111-.027-.111-.185 0-.212h.005c.277-.06.557-.108.838-.147h.002c.131-.009.263-.032.394-.048a25.076 25.076 0 013.426-.12c.674.019 1.347.067 2.017.144l.228.031c.267.04.533.088.798.145.392.085.895.113 1.07.542.055.137.08.288.111.431l.319 1.484a.237.237 0 01-.199.284h-.003c-.037.006-.075.01-.112.015a36.704 36.704 0 01-4.743.295 37.059 37.059 0 01-4.699-.304c-.14-.017-.293-.042-.417-.06-.326-.048-.649-.108-.973-.161-.393-.065-.768-.032-1.123.161-.29.16-.527.404-.675.701-.154.316-.199.66-.267 1-.069.34-.176.707-.135 1.056.087.753.613 1.365 1.37 1.502a39.69 39.69 0 0011.343.376.483.483 0 01.535.53l-.071.697-1.018 9.907c-.041.41-.047.832-.125 1.237-.122.637-.553 1.028-1.182 1.171-.577.131-1.165.2-1.756.205-.656.004-1.31-.025-1.966-.022-.699.004-1.556-.06-2.095-.58-.475-.458-.54-1.174-.605-1.793l-.731-7.013-.322-3.094c-.037-.351-.286-.695-.678-.678-.336.015-.718.3-.678.679l.228 2.185.949 9.112c.147 1.344 1.174 2.068 2.446 2.272.742.12 1.503.144 2.257.156.966.016 1.942.053 2.892-.122 1.408-.258 2.465-1.198 2.616-2.657.34-3.332.683-6.663 1.024-9.995l.215-2.087a.484.484 0 01.39-.426c.402-.078.787-.212 1.074-.518.455-.488.546-1.124.385-1.766z"></path>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/sponsors/kaylumah" target="_blank" aria-label="GitHub Sponsors">
                        <svg class="h-8 w-8" role="img" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                            <title>GitHub Sponsors</title>
                            <path fill="#EA4AAA" d="M17.625 1.499c-2.32 0-4.354 1.203-5.625 3.03-1.271-1.827-3.305-3.03-5.625-3.03C3.129 1.499 0 4.253 0 8.249c0 4.275 3.068 7.847 5.828 10.227a33.14 33.14 0 0 0 5.616 3.876l.028.017.008.003-.001.003c.163.085.342.126.521.125.179.001.358-.041.521-.125l-.001-.003.008-.003.028-.017a33.14 33.14 0 0 0 5.616-3.876C20.932 16.096 24 12.524 24 8.249c0-3.996-3.129-6.75-6.375-6.75zm-.919 15.275a30.766 30.766 0 0 1-4.703 3.316l-.004-.002-.004.002a30.955 30.955 0 0 1-4.703-3.316c-2.677-2.307-5.047-5.298-5.047-8.523 0-2.754 2.121-4.5 4.125-4.5 2.06 0 3.914 1.479 4.544 3.684.143.495.596.797 1.086.796.49.001.943-.302 1.085-.796.63-2.205 2.484-3.684 4.544-3.684 2.004 0 4.125 1.746 4.125 4.5 0 3.225-2.37 6.216-5.048 8.523z"></path>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>

        <!-- Popular Widget -->
        <div class="bg-white rounded-2xl border border-gray-200 p-6">
            <h2 class="text-xl font-semibold mb-4">Popular posts</h2>
            <ul class="space-y-2">
                <li>
                    <a href="/2021/04/11/an-approach-to-writing-mocks.html" class="hover:text-blue-600">
                        Experiment with Moq, an approach to writing mocks
                    </a>
                </li>
                <li>
                    <a href="/2019/09/07/using-csharp-code-your-git-hooks.html" class="hover:text-blue-600">
                        Using C# code in your git hooks
                    </a>
                </li>
            </ul>
        </div>
        
        <!-- TagCloud Widget -->
        <div class="bg-white rounded-2xl border border-gray-200 p-6">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">Tags</h2>
            <ul id="word-cloud" class="flex justify-center flex-wrap align-center gap-1.5 leading-7">
            </ul>
        </div>

        <script>
            const words = [
  {
    "Id": "azure",
    "DisplayName": "Azure",
    "Description": "Microsoft Azure Platform",
    "Size": 2
  },
  {
    "Id": "code-quality",
    "DisplayName": "Code Quality",
    "Description": "Code Quality",
    "Size": 1
  },
  {
    "Id": "configuration",
    "DisplayName": "Configuration",
    "Description": "Application configuration",
    "Size": 1
  },
  {
    "Id": "csharp",
    "DisplayName": "C#",
    "Description": "for the C# programming language",
    "Size": 9
  },
  {
    "Id": "git",
    "DisplayName": "Git",
    "Description": "for the Git version control system",
    "Size": 1
  },
  {
    "Id": "markdown",
    "DisplayName": "Markdown",
    "Description": "for the Markdown language",
    "Size": 1
  },
  {
    "Id": "moq",
    "DisplayName": "Moq",
    "Description": "for the Moq mocking library in .NET",
    "Size": 1
  },
  {
    "Id": "msbuild",
    "DisplayName": "MSBuild",
    "Description": "for the Microsoft Build Engine",
    "Size": 2
  },
  {
    "Id": "nswag",
    "DisplayName": "NSwag",
    "Description": "for the NSwag swagger tooling in .NET",
    "Size": 2
  },
  {
    "Id": "nuget",
    "DisplayName": "NuGet",
    "Description": "for the .NET package manager",
    "Size": 1
  },
  {
    "Id": "openapi",
    "DisplayName": "OpenAPI",
    "Description": "for the OpenAPI Specification (formerly Swagger Specification)",
    "Size": 2
  },
  {
    "Id": "reqnroll",
    "DisplayName": "Reqnroll",
    "Description": "Cucumber runner for .NET",
    "Size": 1
  },
  {
    "Id": "rider",
    "DisplayName": "Rider",
    "Description": "for the JetBrains Rider IDE",
    "Size": 1
  },
  {
    "Id": "swashbuckle",
    "DisplayName": "Swashbuckle",
    "Description": "for the Swashbuckle swagger tooling in .NET",
    "Size": 2
  },
  {
    "Id": "testing",
    "DisplayName": "Testing",
    "Description": "for test related matters",
    "Size": 4
  },
  {
    "Id": "visualstudio",
    "DisplayName": "Visual Studio",
    "Description": "for the Microsoft Visual Studio IDE",
    "Size": 1
  },
  {
    "Id": "visualstudio2019",
    "DisplayName": "Visual Studio 2019",
    "Description": "for the Microsoft Visual Studio IDE",
    "Size": 1
  },
  {
    "Id": "vscode",
    "DisplayName": "VS Code",
    "Description": "for the Microsoft VS Code IDE",
    "Size": 2
  },
  {
    "Id": "xunit",
    "DisplayName": "Xunit",
    "Description": "for the Xunit test framework",
    "Size": 2
  }
];

            const container = document.getElementById('word-cloud');

            words.forEach(word => {
                const li = document.createElement('li');
                const anchor = document.createElement('a');
                anchor.href = `/blog.html?tag=${word.Id}`;
                anchor.title = word.Description;
                anchor.textContent = `${word.DisplayName} (${word.Size})`;
                anchor.classList.add("inline-flex", "hover:underline", "transition");

                // Apply font sizes based on word frequency
                const x = word.Size;
                switch (true) {
                    case (x < 2):
                        anchor.classList.add("text-sm", "text-gray-600", "opacity-80");
                        break;
                    case (x < 4):
                        anchor.classList.add("text-base", "font-medium", "text-gray-700");
                        break;
                    case (x < 6):
                        anchor.classList.add("text-lg", "font-semibold", "text-gray-800");
                        break;
                    default:
                        anchor.classList.add("text-2xl", "font-bold", "text-gray-900");
                        break;
                }

                li.appendChild(anchor);
                container.appendChild(li);
            });
        </script>
        
    </aside>
</div>
</div>
<footer class="bg-white border-t border-gray-200 py-6 text-center text-gray-500 text-sm">
    © Kaylumah. All rights reserved.
</footer>
<div id="cookie-banner" class="fixed inset-x-0 bottom-0 z-50 bg-white shadow-md border-t border-gray-200 p-4 tablet:p-6 flex flex-col tablet:flex-row items-center justify-between gap-4">
    <p class="text-sm text-gray-900 leading-6">
        This website uses cookies to enhance your browsing experience, analyze site traffic, and serve better user experiences. By continuing to use this site, you consent to our use of cookies.
        Learn more in our
        <a class="font-semibold text-primary hover:underline" href="/privacy">cookie policy</a>.
    </p>
    <div class="flex items-center gap-4">
        <button onclick="handleCookieConsentGranted()" type="button" class="rounded-md bg-gray-900 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-700">
            Accept all
        </button>
        <button onclick="handleCookieConsentDenied()" type="button" class="text-sm font-semibold text-gray-900 hover:text-gray-700">
            Reject all
        </button>
    </div>
</div>

<script>
    window.hideCookieBanner = function() {
        let cookieBanner = document.getElementById("cookie-banner");
        if (cookieBanner) {
            cookieBanner.classList.add("hidden");
        }
    };

    window.handleCookieConsentGranted = function() {
        window.setCookieConsent("granted");
        window.setGtagConsentStatus("update", "granted");
        window.hideCookieBanner();
    };

    window.handleCookieConsentDenied = function() {
        window.setCookieConsent("denied");
        window.setGtagConsentStatus("update", "denied");
        window.hideCookieBanner();
    };

    // Check if consent has already been given
    if (window.getCookieConsent() !== "unknown") {
        window.hideCookieBanner();
    }
</script>

</body>
</html>