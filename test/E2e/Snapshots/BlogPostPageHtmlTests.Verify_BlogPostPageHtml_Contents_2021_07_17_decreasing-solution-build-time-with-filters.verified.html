<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="/assets/images/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png" />
    <link rel="manifest" href="/assets/images/site.webmanifest" />
    <link rel="mask-icon" href="/assets/images/safari-pinned-tab.svg" color="DarkGreen" />

    <link href="/compiled.css?v=[SHORT-COMMIT-HASH]" rel="stylesheet" />

    <!-- Begin Kaylumah SEO tag v[SHORT-COMMIT-HASH] -->
    
    <!-- Common Meta Tags -->
    <title>Decreasing Solution Build time with Filters</title>
    <link rel="canonical" href="https://BaseUrl_1/2021/07/17/decreasing-solution-build-time-with-filters.html" />
    <meta name="generator" content="Kaylumah v[SHORT-COMMIT-HASH]" />
    <meta name="description" content="How to use solution filters to increase focus and decrease build time" />
    <meta name="copyright" content="© Kaylumah. All rights reserved." />
    <meta name="keywords" content="msbuild, visualstudio2019" />
    
    <!-- OpenGraph Meta Tags -->
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="en" />
    <meta property="og:site_name" content="Max Hamulyák · Kaylumah" />
    <meta property="og:title" content="Decreasing Solution Build time with Filters" />
    <meta property="og:url" content="https://BaseUrl_1/2021/07/17/decreasing-solution-build-time-with-filters.html" />
    <meta property="og:description" content="How to use solution filters to increase focus and decrease build time" />
    <meta property="og:image" content="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/cover_image.png" />
    <meta property="article:author" content="Max Hamulyák" />
    <meta property="article:published_time" content="2021-07-17T00:00:00.0000000+02:00" />
    <meta property="article:modified_time" content="2021-07-17T00:00:00.0000000+02:00" />
    <meta property="article:tag" content="msbuild" />
    <meta property="article:tag" content="visualstudio2019" />
    
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Decreasing Solution Build time with Filters" />
    <meta name="twitter:description" content="How to use solution filters to increase focus and decrease build time" />
    <meta name="twitter:image" content="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/cover_image.png" />
    <meta name="twitter:site" content="@kaylumah" />
    <meta name="twitter:creator" content="@kaylumah" />
    
    <!-- Kaylumah BuildInfo Meta Tags -->
    <meta property="kaylumah:copyright" content="© Kaylumah. All rights reserved." />
    <meta property="kaylumah:commit" content="[COMMIT-HASH]" />
    <meta property="kaylumah:version" content="1.0.0.BuildNumber_1" />
    <meta property="kaylumah:buildId" content="[BUILD-ID]" />
    <meta property="kaylumah:buildNumber" content="BuildNumber_1" />
    <meta property="kaylumah:time" content="DateTimeOffset_1" />
    <meta property="kaylumah:site" content="Guid_1" />
    <meta property="kaylumah:page" content="Guid_2" />
    
    <!-- LdJson Meta Tags -->
    <script type="application/ld+json">{
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "description": "How to use solution filters to increase focus and decrease build time",
      "image": "https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/cover_image.png",
      "mainEntityOfPage": "https://BaseUrl_1/2021/07/17/decreasing-solution-build-time-with-filters.html",
      "url": "https://BaseUrl_1/2021/07/17/decreasing-solution-build-time-with-filters.html",
      "author": {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Max Hamulyák",
        "image": "https://BaseUrl_1/assets/avatar_background.svg",
        "sameAs": [
          "https://www.linkedin.com/in/maxhamulyak",
          "https://twitter.com/kaylumah"
        ],
        "email": "max@kaylumah.nl"
      },
      "dateModified": "2021-07-17T00:00:00+02:00",
      "datePublished": "2021-07-17T00:00:00+02:00",
      "headline": "Decreasing Solution Build time with Filters",
      "keywords": "msbuild,visualstudio2019",
      "publisher": {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "kaylumah",
        "sameAs": "https://www.linkedin.com/company/kaylumah",
        "foundingDate": "2020-01-01",
        "logo": "https://BaseUrl_1/assets/logo.svg"
      }
    }</script>
    
    <!-- End Kaylumah SEO tag -->
    <!-- BEGIN Feed MetaData-->
    <link
      type="application/atom+xml"
      rel="alternate"
      href="https://BaseUrl_1/feed.xml"
      title="Max Hamulyák · Kaylumah RSS Feed"
    />
    <!-- END Feed MetaData -->
    <!--
                                                        
       _  __           _                       _        
      | |/ /__ _ _   _| |_   _ _ __ ___   __ _| |__     
      | ' // _` | | | | | | | | '_ ` _ \ / _` | '_ \    
      | . \ (_| | |_| | | |_| | | | | | | (_| | | | |   
      |_|\_\__,_|\__, |_|\__,_|_| |_| |_|\__,_|_| |_|   
                 |___/                                  
                                                        
     You found 🧸                                      
                                                       
    -->
    
    <script>
    
      const consoleSignatureText = '%c👨‍💻 Thank you for your visit to my little spot on the internet, be welcome! 🧸';
      const consoleSignatureStyle = `
      font-size: 16px;
      background: #4cae50;
      color: white;
      text-align: center;
      padding: 10px 15px;
      width: 100%;
      border-radius: 20px;
    `;
      console.log(consoleSignatureText, consoleSignatureStyle);
    </script>
    <script>
      window.getCookieConsent = function() {
          try {
              const consent = document.cookie.match(/cookie-consent=([^;]+)/)[1];
              return consent;
          } catch (error) {
              console.log("failed to retrieve consent", error);
              return "unknown";
          }
      };
    
      window.setCookieConsent = function(status) {
    
        if (status != "denied" && status != "granted") {
          throw new Error(`Status ${status} is not supported!`);
        }
    
        let today = new Date();
        let expiryDate = new Date(today.getFullYear() + 1, today.getMonth(), today.getDate());
        document.cookie = `cookie-consent=${status}; expires=${expiryDate}; path=/`;
      }
    
    </script>
    <script>
      // Define dataLayer and the gtag function.
      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
    
      window.setGtagConsentStatus = function(mode, status) {
    
        if (mode != "update" && mode != "default") {
          throw new Error(`Mode ${mode} is not supported!`);
        }
    
        if (status != "denied" && status != "granted") {
          throw new Error(`Status ${status} is not supported!`);
        }
    
        gtag('consent', mode, {
          'ad_storage': status,
          'ad_user_data': status,
          'ad_personalization': status,
          'analytics_storage': status
        });
      }
    
      let currentStatus = window.getCookieConsent();
      let cookiesAllowed = currentStatus == "granted";
    
      if (cookiesAllowed) {
        console.log("cookies already approved");
        window.setGtagConsentStatus("default", "granted");
      } else {
        console.log("assume cookies are denied");
        window.setGtagConsentStatus("default", "denied");
      }
    </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-168549883-1">
    </script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
    
      gtag('js', new Date());
      gtag('config', 'UA-168549883-1');
    </script>
    <link href="https://mastodon.nl/@kaylumah" rel="me">
</head>

<body class="bg-gray-100 antialiased">
    <div class="flex flex-col h-screen">
        <header class="bg-gray-900">
            <nav class="flex flex-wrap items-center justify-between p-4">
                <a data-testid="NavLink-Home" href="/" rel="home">
                    <img data-testid="NavLogo" class="h-12 w-20" height="48" width="80"
                        src="/assets/logo.svg" alt="Kaylumah" />
                </a>
                <button id="hamburger"
                    class="tablet:hidden p-2 rounded-md text-gray-100 hover:text-gray-400 hover:bg-gray-500">
                    <span class="sr-only">Open main menu</span>
                    <svg class="toggle block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                    <svg class="toggle hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
                <ul
                    class="toggle hidden tablet:flex w-full tablet:w-auto text-right text-bold mt-5 tablet:mt-0 border-t-2 border-gray-600 tablet:border-none">
                    
                                        <li>
                                            <a data-testid="NavLink-Blog" href="/blog.html"
                                                class="block tablet:inline-block text-gray-100 hover:text-gray-400 px-3 py-3 border-b-2 border-gray-600 tablet:border-none">
                                                Blog
                                            </a>
                                        </li>
                                        
                </ul>
            </nav>
            <script>
                document.getElementById('hamburger').onclick = function toggleMenu() {
                    const navToggle = document.getElementsByClassName('toggle');
                    for (let i = 0; i < navToggle.length; i++) {
                        navToggle.item(i).classList.toggle('hidden');
                    }
                };
            </script>
        </header>
        <main class="flex-1 p-4 text-gray-900">
            <div class="flex flex-col gap-8 laptop:flex-row">
    <article id="blogContents" class="flex-1 bg-slate-50 border-2 p-6 flex flex-col gap-8">
        <header class="prose laptop:mx-auto">
            <picture class="hidden">
                <source type="image/webp" srcset="/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/cover_image.webp">
                <img src="/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/cover_image.png" alt="cover for Decreasing Solution Build time with Filters" height="640" width="1280" />
            </picture>
            <h1>Decreasing Solution Build time with Filters</h1>
            <div class="flex flex-row gap-4">
                <time datetime="2021-07-17">2021/07/17</time>
                <span>Max Hamulyák</span>
                <span>5 minute</span>
            </div>
            <span class="flex flex-row gap-4">
                
                                <a href="/blog.html?tag=msbuild" title="for the Microsoft Build Engine">MSBuild</a>
                                
                                <a href="/blog.html?tag=visualstudio2019" title="for the Microsoft Visual Studio IDE">Visual Studio 2019</a>
                                
            </span>
        </header>
        <main class="prose laptop:mx-auto">
            <p>There are many ways to structure your projects source code. My preference is a style called single-solution-model. Amongst other things, I like that it provides a single entry point to my project. If, however, your project grows, it can become slow to build it. I am sure some of you will be familiar with the following <a href="https://imgs.xkcd.com/comics/compiling.png" class="external">xkcd joke</a> or some variant of it:</p>
<p><img src="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/xkcd_joke_compiling.png" width="413" height="360" alt="xkcd_joke code is compiling" /></p>
<p>The <a href="https://devblogs.microsoft.com/visualstudio/visual-studio-2022-preview-1-now-available" class="external">next version</a> of Visual Studio will come with a lot of promised performance improvements. VisualStudio 2022 is the first version that takes advantage of the 64-bit processor architecture. I have not yet tested it, but I am hopeful for a more performant experience developing when it ships.</p>
<blockquote>
<p>While I think the 1600+ projects in a solution demo are cool, I would not see myself using the single solution model at that scale.</p>
</blockquote>
<p>That brings me to the topic of today's post. I recently discovered a VS2019 feature I did not know that can bring some improvement to my experience. VS2019 introduced a new feature called <a href="https://docs.microsoft.com/en-us/visualstudio/ide/filtered-solutions?view=vs-2019" class="external">solution filters</a>. I googled a bit against it and did not find a lot about it, except for the Microsoft Docs itself. So I wrote this post to help raise awareness for something I found very useful.</p>
<h2 id="project-setup"><a href="#project-setup">Project Setup</a></h2>
<p>I think over my past couple of posts, it's become clear that I am a fan of the <code>Microsoft.Extensions</code> repository. While Microsoft uses multiple solution files throughout the repository, I would opt for the single solution model.</p>
<p>Many of the projects in the repo follow this pattern:</p>
<ul>
<li><code>Concept.Abstractions</code> provides interfaces</li>
<li><code>.Concept</code> provides default implementation for <code>Concept.Abstractions</code></li>
<li><code>Concept.Concrete</code> technology specific implementation for <code>Concept.Abstractions</code></li>
</ul>
<pre><code class="language-shell">dotnet new sln --name &quot;SlnFilter&quot;

dotnet new classlib --framework netstandard2.1 --name Kaylumah.SlnFilter.Extensions.Concept.Abstractions --output src/Kaylumah.SlnFilter.Extensions.Concept.Abstractions
dotnet new classlib --framework netstandard2.1 --name Kaylumah.SlnFilter.Extensions.Concept --output src/Kaylumah.SlnFilter.Extensions.Concept
dotnet new classlib --framework netstandard2.1 --name Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha --output src/Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha
dotnet new classlib --framework netstandard2.1 --name Kaylumah.SlnFilter.Extensions.Concept.ConcreteBravo --output src/Kaylumah.SlnFilter.Extensions.Concept.ConcreteBravo

dotnet new xunit --framework netcoreapp3.1 --name Kaylumah.SlnFilter.Extensions.Concept.Tests --output test/Kaylumah.SlnFilter.Extensions.Concept.Tests
dotnet new xunit --framework netcoreapp3.1 --name Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha.Tests --output test/Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha.Tests
dotnet new xunit --framework netcoreapp3.1 --name Kaylumah.SlnFilter.Extensions.Concept.ConcreteBravo.Tests --output test/Kaylumah.SlnFilter.Extensions.Concept.ConcreteBravo.Tests

dotnet sln add src/Kaylumah.SlnFilter.Extensions.Concept.Abstractions/Kaylumah.SlnFilter.Extensions.Concept.Abstractions.csproj
dotnet sln add src/Kaylumah.SlnFilter.Extensions.Concept/Kaylumah.SlnFilter.Extensions.Concept.csproj
dotnet sln add src/Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha/Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha.csproj
dotnet sln add src/Kaylumah.SlnFilter.Extensions.Concept.ConcreteBravo/Kaylumah.SlnFilter.Extensions.Concept.ConcreteBravo.csproj
dotnet sln add test/Kaylumah.SlnFilter.Extensions.Concept.Tests/Kaylumah.SlnFilter.Extensions.Concept.Tests.csproj
dotnet sln add test/Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha.Tests/Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha.Tests.csproj
dotnet sln add test/Kaylumah.SlnFilter.Extensions.Concept.ConcreteBravo.Tests/Kaylumah.SlnFilter.Extensions.Concept.ConcreteBravo.Tests.csproj

dotnet new classlib --framework netstandard2.1 --name Kaylumah.SlnFilter.Test.Utilities --output test/Kaylumah.SlnFilter.Test.Utilities
</code></pre>
<blockquote>
<p>Note <code>Kaylumah.SlnFilter.Test.Utilities</code> should not yet be added to the solution.</p>
</blockquote>
<h2 id="setting-up-our-filters"><a href="#setting-up-our-filters">Setting up our filters</a></h2>
<p>After following these steps, our project should look like the picture below in Visual Studio.</p>
<p><img src="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/001_vs2019_sln_all_projects.png" width="1428" height="1040" alt="Visual Studio 2019 - Solution all projects loaded" /></p>
<p>We can select one or more projects at a time and unload them from the solution.</p>
<p><img src="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/002_vs2019_sln_unload_projects.png" width="2360" height="1864" alt="Visual Studio 2019 - Unload project menu" /></p>
<p>Up until now, this is how I would have done things. Just unload projects I won't need and don't worry about them anymore. What I did not know is that we save the current state of the solution.</p>
<p><img src="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/003_vs2019_sln_save_filter_001.png" width="2464" height="224" alt="Visual Studio 2019 - Save as Solution Filter" /></p>
<p>Unloading projects manually to create filters can be error-prone. Since a solution filter only builds the projects selected by the filter missing a project causes the build to fail.</p>
<p>An alternative can be to unload all projects, select the project you want, and use the &quot;reload with dependencies&quot; option.</p>
<p><img src="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/004_vs2019_sln_reload_project_dependencies.png" width="2316" height="1528" alt="Visual Studio 2019 - Reload Project with Dependencies" /></p>
<p>Like before, we can save the solution filter with the <code>Save As Solution Filter</code> option. The only difference is that we now get 4/7 projects as opposed to 5/7 projects. That's because we loaded the <code>ConcreteBravo.Tests</code> projects and it's dependencies. Even though that loads <code>Extensions.Concept</code> it does not load <code>Extensions.Concept.Tests</code> since it is not a dependency of <code>ConcreteBravo.Tests</code>.</p>
<p><img src="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/005_vs2019_sln_save_filter_002.png" width="2464" height="2212" alt="Visual Studio 2019 - Save as Solution Filter - Scenario A" /></p>
<p>While researching something unrelated to this post, I noticed that the <a href="https://github.com/dotnet/efcore" class="external">EF Core team</a> used this feature I did not know existed. The cool thing was that they also had a filter for all projects. So I had to try that out, and as it turns out, you can create a filter without unloading projects.</p>
<p><img src="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/006_vs2019_sln_save_filter_003.png" width="2464" height="2160" alt="Visual Studio 2019 - Save as Solution Filter - Scenario B" /></p>
<p>The image below shows the difference between the three filters we created. It looks exactly like a traditional Solution Explorer with the addition that the name of the filter applied is displayed.</p>
<p><img src="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/007_vs2019_slnf_project_overview.png" width="4284" height="1040" alt="Visual Studio 2019 - Solution Filter Scenarios Compared" /></p>
<p>For example, the <code>SlnFilter.Alpha.slnf</code> I created for <code>Concept.ConcreteAlpha</code> implementation looks like this:</p>
<pre><code class="language-json">{
  &quot;solution&quot;: {
    &quot;path&quot;: &quot;SlnFilter.sln&quot;,
    &quot;projects&quot;: [
      &quot;src\\Kaylumah.SlnFilter.Extensions.Concept.Abstractions\\Kaylumah.SlnFilter.Extensions.Concept.Abstractions.csproj&quot;,
      &quot;src\\Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha\\Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha.csproj&quot;,
      &quot;src\\Kaylumah.SlnFilter.Extensions.Concept\\Kaylumah.SlnFilter.Extensions.Concept.csproj&quot;,
      &quot;test\\Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha.Tests\\Kaylumah.SlnFilter.Extensions.Concept.ConcreteAlpha.Tests.csproj&quot;,
      &quot;test\\Kaylumah.SlnFilter.Extensions.Concept.Tests\\Kaylumah.SlnFilter.Extensions.Concept.Tests.csproj&quot;
    ]
  }
}
</code></pre>
<p>It contains a reference to the <code>sln-file</code> and relative paths to all my <code>*.csprojs</code> I included in the <code>.slnf-file</code>.</p>
<h2 id="manage-solution-changes"><a href="#manage-solution-changes">Manage solution changes</a></h2>
<p>You might be wondering what happens when I need to add new projects to my solution?</p>
<p>To demonstrate, let us assume our test projects have a shared helper project. At this time, I want to update our &quot;Concept.Bravo&quot; solution filter. This time I don't want to use dotnet CLI but use <code>Add existing project</code>.</p>
<blockquote>
<p>You cannot use <code>dotnet sln add</code> on slnf files, but you can use them with <code>dotnet build</code></p>
</blockquote>
<p><img src="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/008_vs2019_slnf_add_existing_project.png" width="3088" height="1644" alt="Visual Studio 2019 - Add Existing Project" /></p>
<p>As soon as you did this, you get this pop-up stating a mismatch between the loaded projects and the project specified in the filter.</p>
<p>If you followed the steps in a GIT environment, you would see that even before pressing <code>Update Solution Filter</code> the underlying solution is already updated.</p>
<p><img src="https://BaseUrl_1/assets/images/posts/20210717/decreasing-solution-build-time-with-filters/009_vs2019_slnf_update_solution_filter.png" width="1428" height="1040" alt="Visual Studio 2019 - Regenerate Solution Filter" /></p>
<h2 id="the-missing-bit"><a href="#the-missing-bit">The missing bit</a></h2>
<p>I discussed this feature at work as a potential workaround for an issue we had in structuring our projects. One of my colleagues remembered looking at it about a year ago and finding it lacking. A few minutes later, he found a <a href="https://developercommunity.visualstudio.com/t/Solution-Filter-should-allow-for-Include/1090914?space=8&amp;q=solution+filter" class="external">post</a> on the developer community for Visual Studio. Funnily enough, it's a small world; the user-post links to a GitHub issue he created in this matter.</p>
<p>The problem is the management of multiple solutions filters because the filters are inclusive with relative paths following the sln-filter location. A proposed improvement would be to use glob patterns to include/exclude projects. That would make it easier when following naming conventions to have always up-to-date filters.</p>
<p>At a customer I work for, they use PowerShell as their script platform of choice, so I needed a deeper understanding of PowerShell. With PowerShell, it's reasonably easy to work with the file system and convert from and to JSON. So I thought, how hard can it be to script this.</p>
<p>The following script loads the paths of all *.csproj present in the solution directory and filters them out by RegEx. It then writes it to disk in the .slnf-format.</p>
<pre><code class="language-ps">$inputSln = &quot;SlnFilter.sln&quot;
$outputSlnFilter = &quot;SlnFilter.Generated.slnf&quot;

$projectFiles = Get-ChildItem -Recurse -Filter &quot;*.csproj&quot; -Name
# $excludeFilters = @()
$excludeFilters = @('.ConcreteBravo')


$targetProjects = New-Object Collections.Generic.List[String]

foreach ($project in $projectFiles)
{
    $shouldInclude = $true

    foreach ($filter in $excludeFilters)
    {
        $shouldInclude = $project -notmatch $filter
        if (!$shouldInclude)
        {
            break
        }
    }

    if ($shouldInclude)
    {
        $targetProjects.Add($project)
    }
}

$sln = New-Object -TypeName psobject
$sln | Add-Member -MemberType NoteProperty -Name &quot;path&quot; -Value $inputSln
$sln | Add-Member -MemberType NoteProperty -Name &quot;projects&quot; -value $targetProjects

$root = New-Object -TypeName psobject
$root | Add-Member -MemberType NoteProperty -Name &quot;solution&quot; -value $sln

$root | ConvertTo-Json | Out-File $outputSlnFilter
</code></pre>
<h2 id="closing-thoughts"><a href="#closing-thoughts">Closing Thoughts</a></h2>
<p>I like this new feature as a way to manage my larger solutions. Of course, it's not practical to maintain my (very basic) script for this. It will be a huge help if you think this is a valuable feature to upvote the Visual Studio Community forum issue.</p>
<p>As always, if you have any questions, feel free to reach out. Do you have suggestions or alternatives? I would love to hear about them.</p>
<p>The corresponding source code for this article is on <a href="https://github.com/kaylumah/SolutionFilter" class="external">GitHub</a>.</p>
<p>See you next time, stay healthy and happy coding to all 🧸!</p>
<h2 id="sources"><a href="#sources">Sources</a></h2>
<ul>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/ide/filtered-solutions?view=vs-2019" class="external">slnf in VisualStudio</a></li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/msbuild/solution-filters?view=vs-2019" class="external">slnf in MSBuild</a></li>
</ul>
        </main>
        <footer class="">
            
                        <!-- https://giscus.app -->
                        <!-- https://github.com/giscus/giscus/blob/main/ADVANCED-USAGE.md -->
                        <script src="https://giscus.app/client.js"
                            data-repo="kaylumah/hosting"
                            data-repo-id="MDEwOlJlcG9zaXRvcnkzMzgyNzg4MzU="
                            data-mapping="number"
                            data-term="142"
                            data-reactions-enabled="1"
                            data-emit-metadata="0"
                            data-input-position="top"
                            data-theme="light_high_contrast"
                            data-lang="en"
                            data-loading="lazy"
                            crossorigin="anonymous"
                            async>
                        </script>
                        
        </footer>
    </article>
    <ul id="tiles" class="flex-none flex flex-col items-center gap-4">
        <li class="w-full laptop:w-64">
            <div class="bg-slate-50 border-2 p-6 flex flex-col items-center gap-2">
                <img class="rounded-full h-32 w-32" src="/assets/avatar_background.svg" alt="Kaylumah Hero" />
                <h2 class="text-xl font-semibold">Max Hamulyák</h2>
                <span>aka Kaylumah</span>
            </div>
        </li>
        <li class="w-full laptop:w-64">
            <div class="bg-slate-50 border-2 p-6 flex flex-col items-center gap-2">
                <h2 class="text-xl font-semibold">Sponsors</h2>
                <p>
                    Enjoy reading my content? Consider becoming a sponsor for the blog.
                    This will help keep the blog up and running! 
                </p>
                <ul class="flex flex-row items-center gap-2">
                    <li>
                        <a href="https://www.buymeacoffee.com/kaylumah" target="_blank">
                            <svg class="block h-8 w-8" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                                <!-- https://simpleicons.org -->
                                <title>Buy Me A Coffee</title>
                                <path fill="#FFDD00" d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.241-.152-.143-.196-.366-.231-.572-.065-.378-.125-.756-.192-1.133-.057-.325-.102-.69-.25-.987-.195-.4-.597-.634-.996-.788a5.723 5.723 0 00-.626-.194c-1-.263-2.05-.36-3.077-.416a25.834 25.834 0 00-3.7.062c-.915.083-1.88.184-2.75.5-.318.116-.646.256-.888.501-.297.302-.393.77-.177 1.146.154.267.415.456.692.58.36.162.737.284 1.123.366 1.075.238 2.189.331 3.287.37 1.218.05 2.437.01 3.65-.118.299-.033.598-.073.896-.119.352-.054.578-.513.474-.834-.124-.383-.457-.531-.834-.473-.466.074-.96.108-1.382.146-1.177.08-2.358.082-3.536.006a22.228 22.228 0 01-1.157-.107c-.086-.01-.18-.025-.258-.036-.243-.036-.484-.08-.724-.13-.111-.027-.111-.185 0-.212h.005c.277-.06.557-.108.838-.147h.002c.131-.009.263-.032.394-.048a25.076 25.076 0 013.426-.12c.674.019 1.347.067 2.017.144l.228.031c.267.04.533.088.798.145.392.085.895.113 1.07.542.055.137.08.288.111.431l.319 1.484a.237.237 0 01-.199.284h-.003c-.037.006-.075.01-.112.015a36.704 36.704 0 01-4.743.295 37.059 37.059 0 01-4.699-.304c-.14-.017-.293-.042-.417-.06-.326-.048-.649-.108-.973-.161-.393-.065-.768-.032-1.123.161-.29.16-.527.404-.675.701-.154.316-.199.66-.267 1-.069.34-.176.707-.135 1.056.087.753.613 1.365 1.37 1.502a39.69 39.69 0 0011.343.376.483.483 0 01.535.53l-.071.697-1.018 9.907c-.041.41-.047.832-.125 1.237-.122.637-.553 1.028-1.182 1.171-.577.131-1.165.2-1.756.205-.656.004-1.31-.025-1.966-.022-.699.004-1.556-.06-2.095-.58-.475-.458-.54-1.174-.605-1.793l-.731-7.013-.322-3.094c-.037-.351-.286-.695-.678-.678-.336.015-.718.3-.678.679l.228 2.185.949 9.112c.147 1.344 1.174 2.068 2.446 2.272.742.12 1.503.144 2.257.156.966.016 1.942.053 2.892-.122 1.408-.258 2.465-1.198 2.616-2.657.34-3.332.683-6.663 1.024-9.995l.215-2.087a.484.484 0 01.39-.426c.402-.078.787-.212 1.074-.518.455-.488.546-1.124.385-1.766zm-1.478.772c-.145.137-.363.201-.578.233-2.416.359-4.866.54-7.308.46-1.748-.06-3.477-.254-5.207-.498-.17-.024-.353-.055-.47-.18-.22-.236-.111-.71-.054-.995.052-.26.152-.609.463-.646.484-.057 1.046.148 1.526.22.577.088 1.156.159 1.737.212 2.48.226 5.002.19 7.472-.14.45-.06.899-.13 1.345-.21.399-.072.84-.206 1.08.206.166.281.188.657.162.974a.544.544 0 01-.169.364zm-6.159 3.9c-.862.37-1.84.788-3.109.788a5.884 5.884 0 01-1.569-.217l.877 9.004c.065.78.717 1.38 1.5 1.38 0 0 1.243.065 1.658.065.447 0 1.786-.065 1.786-.065.783 0 1.434-.6 1.499-1.38l.94-9.95a3.996 3.996 0 00-1.322-.238c-.826 0-1.491.284-2.26.613z"/>
                            </svg>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/sponsors/kaylumah" target="_blank">
                            <svg class="block h-8 w-8" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                                <!-- https://simpleicons.org -->
                                <title>GitHub Sponsors</title>
                                <path fill="#EA4AAA" d="M17.625 1.499c-2.32 0-4.354 1.203-5.625 3.03-1.271-1.827-3.305-3.03-5.625-3.03C3.129 1.499 0 4.253 0 8.249c0 4.275 3.068 7.847 5.828 10.227a33.14 33.14 0 0 0 5.616 3.876l.028.017.008.003-.001.003c.163.085.342.126.521.125.179.001.358-.041.521-.125l-.001-.003.008-.003.028-.017a33.14 33.14 0 0 0 5.616-3.876C20.932 16.096 24 12.524 24 8.249c0-3.996-3.129-6.75-6.375-6.75zm-.919 15.275a30.766 30.766 0 0 1-4.703 3.316l-.004-.002-.004.002a30.955 30.955 0 0 1-4.703-3.316c-2.677-2.307-5.047-5.298-5.047-8.523 0-2.754 2.121-4.5 4.125-4.5 2.06 0 3.914 1.479 4.544 3.684.143.495.596.797 1.086.796.49.001.943-.302 1.085-.796.63-2.205 2.484-3.684 4.544-3.684 2.004 0 4.125 1.746 4.125 4.5 0 3.225-2.37 6.216-5.048 8.523z"/>
                            </svg>
                        </a>
                    </li>
                </ul>
            </div>
        </li>
        <li class="w-full laptop:w-64">
            
            
            
            <div class="bg-slate-50 border-2 p-6 flex flex-col items-center gap-2">
                <h2 class="text-xl font-semibold">Popular posts</h2>
                <ul class="flex flex-col gap-2">
                    
                            <li>
                                <a href="/2021/04/11/an-approach-to-writing-mocks.html">Experiment with Moq, an approach to writing mocks</a>
                            </li>
                            
                            <li>
                                <a href="/2019/09/07/using-csharp-code-your-git-hooks.html">Using C# code in your git hooks</a>
                            </li>
                            
                </ul>
            </div>

        </li>
        <li class="w-full laptop:w-64">
            
            
            
        </li>
        <li class="w-full laptop:w-64">
            <div class="bg-slate-50 border-2 p-6 flex flex-col items-center gap-2">
                <h2 class="text-xl font-semibold">Tags</h2>
                <ul id="word-cloud" class="flex justify-center flex-wrap align-center gap-2 leading-8">
                </ul>
                <script>
                var words = [
                  
                        { id: 'azure', text: 'Azure', size: 2 },
                        
                        { id: 'code-quality', text: 'Code Quality', size: 1 },
                        
                        { id: 'configuration', text: 'Configuration', size: 1 },
                        
                        { id: 'csharp', text: 'C#', size: 9 },
                        
                        { id: 'git', text: 'Git', size: 1 },
                        
                        { id: 'moq', text: 'Moq', size: 1 },
                        
                        { id: 'msbuild', text: 'MSBuild', size: 2 },
                        
                        { id: 'nswag', text: 'NSwag', size: 2 },
                        
                        { id: 'nuget', text: 'NuGet', size: 1 },
                        
                        { id: 'openapi', text: 'OpenAPI', size: 2 },
                        
                        { id: 'reqnroll', text: 'Reqnroll', size: 1 },
                        
                        { id: 'rider', text: 'Rider', size: 1 },
                        
                        { id: 'swashbuckle', text: 'Swashbuckle', size: 2 },
                        
                        { id: 'testing', text: 'Testing', size: 4 },
                        
                        { id: 'visualstudio', text: 'Visual Studio', size: 1 },
                        
                        { id: 'visualstudio2019', text: 'Visual Studio 2019', size: 1 },
                        
                        { id: 'vscode', text: 'VS Code', size: 1 },
                        
                        { id: 'xunit', text: 'Xunit', size: 2 },
                        
                ];
                
                var container = document.getElementById('word-cloud');
                words.forEach(word => {
                  const li = document.createElement('li');
                  const anchor = document.createElement('a');
                  anchor.href = "/blog.html?tag=" + word.id;
                  anchor.text = `${word.text} (${word.size})`;
                  const x = word.size;
                  switch(true)
                  {
                    case (x < 2):
                      anchor.classList = "text-md"//; text-gray-500";
                      break;
                    case (x < 4):
                      anchor.classList = "text-lg"//; text-blue-500";
                      break;
                    case (x < 6):
                      anchor.classList = "text-xl"//; text-red-500";
                      break;
                    default:
                      anchor.classList = "text-2xl"//; text-green-500";
                      break;
                  }
                
                  li.appendChild(anchor);
                  container.appendChild(li);
                });  
                </script>
            </div>
        </li>
    </ul>
</div>

        </main>
        <footer class="bg-gray-900 p-4">
            <div class="flex flex-col text-center text-gray-100">
                <span data-testid="Footer-CopyrightNotice">© Kaylumah. All rights reserved.</span>
                <!-- <span class="text-xs">Deployed from commit <a data-testid="FooterLink-CommitId" class="hover:text-gray-400" href="https://github.com/kaylumah/hosting/commit/[COMMIT-HASH]">[SHORT-COMMIT-HASH]</a> via build <a data-testid="FooterLink-BuildId" class="hover:text-gray-400" href="https://github.com/kaylumah/hosting/actions/runs/[BUILD-ID]">BuildNumber_1</a></span> -->
            </div>
        </footer>
        <div id="cookie-banner" class="fixed inset-x-0 bottom-0 z-10 flex flex-col justify-between gap-x-8 gap-y-4 bg-white p-6 tablet:flex-row tablet:items-center laptop:px-8">
            <p class="text-sm leading-6 text-gray-900">This website uses cookies to enhance your browsing experience, analyze site traffic, and serve better user experiences. By continuing to use this site, you consent to our use of cookies. Learn more in our <a class="font-semibold text-teal-600" href="/privacy">cookie policy</a>.</p>
            <div class="mr-16 flex flex-none items-center gap-x-5">
                <button onclick="handleCookieConsentGranted()" type="button" class="rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-700">Accept all</button>
                <button onclick="handleCookieConsentDenied()" type="button" class="text-sm font-semibold leading-6 text-gray-900">Reject all</button>
            </div>
            <script>

                window.hideCookieBanner = function() {
                    let cookieBanner = document.getElementById("cookie-banner");
                    cookieBanner.classList.toggle("hidden");
                }
    
                window.handleCookieConsentGranted = function() {
                  window.setCookieConsent("granted");
                  window.setGtagConsentStatus("update", "granted");
                  window.hideCookieBanner();
                }
              
                window.handleCookieConsentDenied = function() {
                    window.setCookieConsent("denied");
                    window.setGtagConsentStatus("update", "denied");
                    window.hideCookieBanner();
                }
    
                let hideCookieBanner = window.getCookieConsent() != "unknown";
                if (hideCookieBanner)
                {
                    window.hideCookieBanner();
                }
              
            </script>
        </div>
    </div>
</body>

</html>